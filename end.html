<!DOCTYPE html>
  <html lang = "en">
    <head>
      <title>adjectils - The End</title>
      <link rel="stylesheet" href="stylesheet.css">
      <meta name = "description" content = "Ender utilities for Hypixel SkyBlock">
      <meta name = "author" content = "adjective_n0un">
      <meta name = "viewport" content="width=device-width, initial-scale=0.6">
      <link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png">
      <link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png">
      <link rel="manifest" href="./favicon/site.webmanifest">
      <script type="text/javascript" src="/jquery-3.6.3.min.js"></script>
      <script src = "slayercalc.js"></script>
    </head>
  <body onload="updatePage()">
  
      <script>
      $(function(){
        $("#nav").load("nav.html"); 
      });
      </script>
  
  <div id = header style = "background-color: #282828; width: 600px; text-align:center; margin:auto">
    <a href = "index.html" class = adjheader>adjectils</a><span class = header>&nbsp;|&nbsp;</span><span class = endheader>The End</span><br>
  </div> 
  <section class = "flex_box_index">
  <div class = "end_block" style = "width:min(calc(100% - 30px), max(600px, 40%));", id = "box1">
    <span class = voidheader>Dragons & Golems</span><br>  
    <label class = basictext>User's Magic Find: <input type = "number" id = "magicfind" min = 0 max = 900 onchange = "(() => updateDragonChance(magicfind.value, petluck.value, summoningeye.value))()" value = 124></input></label><br>
    <label class = basictext>User's Pet Luck: <input type = "number" inputmode = "numeric" id = "petluck" min = 0 onchange = "(() => updateDragonChance(magicfind.value, petluck.value, summoningeye.value))()" value = 30></input></label><br>
    <label class = basictext>Eyes placed: </span><input type = "number" inputmode = "numeric" id = "summoningeye" min = 0 max = 8 onchange = "(() => updateDragonChance(magicfind.value, petluck.value, summoningeye.value))()" value = 4></input></label><br>
    <br>
    <table style = "width:400px">
      <tr><td><span class = basictext>Chance of Dragon Claw: </span></td><td><span id = "clawoutput" style = "text-align:right">0.000%</span><br></td></tr>
      <tr><td><span class = basictext>Chance of Legendary Ender Dragon pet: </span></td><td><span id = "legpetoutput" style = "text-align:right">0.000%</span><br></td></tr>
      <tr><td><span class = basictext>Chance of Epic Ender Dragon pet: </span></td><td><span id = "epicpetoutput" style = "text-align:right">0.000%</span><br></td></tr>
      <tr><td><br></td></tr>
      <tr><td><span class = basictext>Chance of Tier Boost Core: </span></td><td><span id = "tbcoutput" style = "text-align:right">0.000%</span><br></td></tr>
      <tr><td><span class = basictext>Chance of Legendary Golem pet: </span></td><td><span id = "leggolemoutput" style = "text-align:right">0.000%</span><br></td></tr>
      <tr><td><span class = basictext>Chance of Epic Golem pet: </span></td><td><span id = "epicgolemoutput" style = "text-align:right">0.000%</span><br></td></tr>
    </table>

  </div>
  <div class = "end_block" style = "width:min(calc(100% - 30px), max(600px, 40%));", id = "box2">
    <span class = voidheader>Voidgloom Seraph</span><br>
    <label class = basictext>User's Magic Find: <input type = "number" inputmode = "numeric" id = slayermagicfind value = 120 min = 0 max = 900 onchange = updateAllChances(slayermagicfind.value)></input></label><br>
    <label class = basictext>RNG meter percent: <input type = "number" inputmode = "numeric" id = rngmeterpercent value = 0 min = 0 max = 100 onchange = updateAllChances(slayermagicfind.value)></input>%</label><br>
    <form action = "#">
      <label>Selected meter item: 
      <select id = selecteddrop onchange = updateAllChances(slayermagicfind.value)>
        <option value = null>None</option>
        <option value = twilight>Twilight Arrow Poison</option>
        <option value = atom>Null Atom</option>
        <option value = book_mana>Mana Steal I book</option>
        <option value = tuner>Transmission Tuner</option>
        <option value = book_intel>Smarty Pants I book</option>
        <option value = hazmat>Hazmat Enderman</option>
        <option value = eye>Summoning Eye</option>
        <option value = dice>Sinful Dice</option>
        <option value = merger>Etherwarp Merger</option>
        <option value = depresso>Pocket Espresso Machine</option>
        <option value = chalice>Handy Blood Chalice</option>
        <option value = core>Judgement Core</option>
        <option value = longname>EREAU</option>
        <option value = book_ender>Ender Slayer VII book</option>
        <option value = rune_esnake>Endersnake Rune I</option>
        <option value = rune_end>End Rune I</option>
        <option value = skin_void>Void Conqueror Enderman Skin</option>
        <option value = rune_enchant>Enchant Rune I</option>
      </select>
      </label>
    </form>
    <form action = "#">
      <label>Display: 
      <select id = frac onchange = updateAllChances(slayermagicfind.value)>
        <option value = 0>Percentage</option>
        <option value = 1>Fraction</option>
      </select>
      </label>
    </form>
    <span class = fineprint>Note: This calculator only provides the chances for tier IV.</span>
    <table id = loottable_seraph>
    <tr><td><hr class = solid></td></tr>
    <tr><td><span class = basictext>Chance of Twilight Arrow Poison: </span></td><td><span style = "text-align: right" class = basictext id = chance_twilight></span></td><br></tr>
    <tr><td><span class = basictext>Chance of Null Atom: </span></td><td><span style = "text-align: right" class = basictext id = chance_atom></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Mana Steal I book: </span></td><td><span class = basictext id = chance_book_mana></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Transmission Tuner: </span></td><td><span class = basictext id = chance_tuner></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Smarty Pants I book: </span></td><td><span class = basictext id = chance_book_intel></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Hazmat Enderman: </span></td><td><span class = basictext id = chance_hazmat></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Summoning Eye: </span></td><td><span class = basictext id = chance_eye></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Sinful Dice: </span></td><td><span class = basictext id = chance_dice></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Etherwarp Merger: </span></td><td><span class = basictext id = chance_merger></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Pocket Espresso Machine: </span></td><td><span class = basictext id = chance_depresso></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Handy Blood Chalice: </span></td><td><span class = basictext id = chance_chalice></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Judgement Core: </span></td><td><span class = basictext id = chance_core></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Exceedingly Rare Ender Artifact Upgrader: </span></td><td><span class = basictext id = chance_longname></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Ender Slayer VII book: </span></td><td><span class = basictext id = chance_book_ender></span><br></td></tr>
    
    <tr><td><hr class = solid></td></tr>
    <tr><td><span class = fineprint>One of the following items may be obtained in addition to the primary drop.</span></td></tr>
    <tr><td><span class = basictext>Chance of Endersnake Rune I: </span></td><td><span class = basictext id = chance_rune_esnake></span><br></td></tr>
    <tr><td><span class = basictext>Chance of End Rune I: </span></td><td><span class = basictext id = chance_rune_end></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Void Conqueror Enderman Skin: </span></td><td><span class = basictext id = chance_skin_void></span><br></td></tr>
    <tr><td><span class = basictext>Chance of Enchant Rune I: </span></td><td><span class = basictext id = chance_rune_enchant></span><br></td></tr>
    <tr><td><hr class = solid></td></tr>
    </table>
  </div>
  </div>
  </section>
  <div id = "nav" class = "end_block" style = "width:min(calc(100% - 30px), max(600px, 40%)); margin:auto"></div>
  </body>
  
  <script>
    function updateDragonChance(m, p, s){
        if (m > 900){
          m = 900;
          document.getElementById("magicfind").value = 900;
        }
        if (m < 0){
          m = 0;
          document.getElementById("magicfind").value = 0;
        }
        if (p > 900){
          p = 900;
          document.getElementById("petluck").value = 900;
        }
        if (p < 0){
          p = 0;
          document.getElementById("petluck").value = 0;
        }
        if (s < 0){
          s = 0;
          document.getElementById("summoningeye").value = 0;
        }
        if (s > 8){
          s = 8;
          document.getElementById("summoningeye").value = 8;
        }
        var clawchance = ((0.02 * s) * (1 + (m * 0.01)));
        if (clawchance > 1){
          clawchance = 1;
        }
        var pet_leg_chance = (0.0001 * s * (1 + (m * 0.01) + (p * 0.01))) * (1 - clawchance);
        
        var pet_epic_chance = (0.0005 * s * (1 + (m * 0.01) + (p * 0.01))) * (1 - clawchance + pet_leg_chance);
        var tbcchance = (0.002 * (1 + (m * 0.01)));
        var golem_leg_chance = (0.006 * (1 + (m * 0.01) + (p * 0.01)));
        var golem_epic_chance = (0.02 * (1 + (m * 0.01) + (p * 0.01)));
        
        if (isNaN(s) || isNaN(p) || isNaN(m)) {
          console.log("Non-numerical input");
        } else {
          document.getElementById("clawoutput").innerText = (100 * clawchance).toFixed(3) + "%";
          document.getElementById("legpetoutput").innerText = (100 * pet_leg_chance).toFixed(3) + "%";
          document.getElementById("epicpetoutput").innerText = (100 * pet_epic_chance).toFixed(3) + "%";
          document.getElementById("tbcoutput").innerText = (100 * tbcchance).toFixed(3) + "%";
          document.getElementById("leggolemoutput").innerText = (100 * golem_leg_chance).toFixed(3) + "%";
          document.getElementById("epicgolemoutput").innerText = (100 * golem_epic_chance).toFixed(3) + "%";
        }
        
    }
    
    
    var weight_rune_esnake = 800;
    var weight_rune_end = 100;
    var weight_skin_void = 25;
    var weight_rune_enchant = 7;
    //var totalweight = weight_twilight + weight_eye + weight_book_mana + weight_tuner + weight_atom + weight_hazmat + weight_depresso + weight_book_intel + weight_chalice + weight_dice + weight_longname + weight_merger + weight_core + weight_book_ender + weight_rune_esnake + weight_rune_end + weight_skin_void + weight_rune_enchant;
    
    function updateAllChances(){
      var weights = {
        "twilight": 1800,
        "eye": 80,
        "book_mana": 600,
        "tuner": 300,
        "atom": 700,
        "hazmat": 220,
        "depresso": 55,
        "book_intel": 250,
        "chalice": 25,
        "dice": 65,
        "longname": 4,
        "merger": 60,
        "core": 8,
        "book_ender": 2,
      }
      var extraweights = {
        "rune_esnake": 800,
        "rune_end": 100,
        "skin_void": 25,
        "rune_enchant": 7,
      }
      //see slayercalc.js
      updateChances(weights, extraweights);
    }
    

    function updatePage(){
        updateDragonChance(124, 30, 4);
        updateAllChances(120);
        console.log("Page updated. Chances reset");
    }
  </script>