<div style="font-size: 30px; font-family: monospace">
    <p id="catacombs"></p>
    <p id="archer"></p>
    <p id="berserk"></p>
    <p id="healer"></p>
    <p id="mage"></p>
    <p id="tank"></p>
    <p id="asof"></p>
</div>

<button onclick="updateStats()">Update</button>
<script>
    let dungeonStats = {
        catacombs: 0,
        archer: 0,
        berserk: 0,
        healer: 0,
        mage: 0,
        tank: 0
    };

    uuid = "f4bee4a9c1ca4b929563f4f8148b2968"; // Must be undashed

    function updateStats() {

        fetch(`https://adjectilsbackend.adjectivenoun3215.workers.dev/v2/skyblock/profiles?uuid=${uuid}`)
        .then(response => response.json())
        .then(data => {
            document.getElementById("asof").innerHTML = `As of: ${new Date().toLocaleString()}`;

            oldDungeonStats = structuredClone(dungeonStats);

            console.log(data);
            const profiles = data["profiles"]
            const currentProfile = profiles.find(profile => profile["selected"] === true);

            dungeonStats["catacombs"] = currentProfile["members"][uuid]["dungeons"]["dungeon_types"]["catacombs"]["experience"];

            const dungeonClasses = ["archer", "berserk", "healer", "mage", "tank"];
            for (a of dungeonClasses) {
                dungeonStats[a] = currentProfile["members"][uuid]["dungeons"]["player_classes"][a]["experience"];
            }

            console.log(oldDungeonStats);

            for (a in dungeonStats) {
                document.getElementById(a).innerHTML = `${a}: ${dungeonStats[a]} XP (+${dungeonStats[a] - oldDungeonStats[a]} XP)`;
            }
        });
    }

    updateStats();
</script>